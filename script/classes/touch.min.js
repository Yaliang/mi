touch={touchInitialize:function(t){this.selector=t,$(this.selector).stop(),this.stop=!0,0==$(this.selector).children(".touch-scroll-bar").length&&$(this.selector).prepend("<div class='touch-scroll-bar'></div>"),this.scrollBarElement=$(this.selector).children(".touch-scroll-bar"),this.touchHideScrollBar(),$(this.selector).unbind("touchstart").bind("touchstart",function(t){touch.touchStartEventHandler(t),touch.touchShowScrollBar(),touch.touchUpdateScrollBar()}),$(this.selector).unbind("touchmove").bind("touchmove",function(t){touch.touchMoveEventHandler(t),touch.touchUpdateScrollBar()}),$(this.selector).unbind("touchend").bind("touchend",function(t){touch.touchEndEventHandler(t)})},touchStartEventHandler:function(t){$(this.selector).stop(),this.stop=!0,this.currentY=t.originalEvent.touches[0].clientY,this.moveStartY=this.currentY,this.moveStartTime=new Date,this.moveSlowCircle=0},touchMoveEventHandler:function(t){t.preventDefault(),this.lastY=this.currentY,this.currentY=t.originalEvent.touches[0].clientY,this.moveRate=1+Math.round(Math.abs(this.currentY-this.lastY)/10),this.moveRate>1?this.moveSlowCircle=0:this.moveSlowCircle+=1;var o=$(this.selector).scrollTop()-(this.currentY-this.lastY);$(this.selector).scrollTop(o)},touchEndEventHandler:function(t){return this.moveSlowCircle>5?void touch.touchHideScrollBar():(this.moveEndTime=new Date,this.moveRate=1*(this.currentY-this.moveStartY)/(this.moveEndTime-this.moveStartTime)*30,this.stop=!1,void this.touchEndAnimate())},touchEndAnimate:function(){return this.moveRate=19*this.moveRate/20,Math.abs(this.moveRate)<1?void touch.touchHideScrollBar():($(this.selector).scrollTop(1*$(this.selector).scrollTop()-this.moveRate),this.touchUpdateScrollBar(),void setTimeout(function(){touch.stop||touch.touchEndAnimate()},20))},touchShowScrollBar:function(){var t=$(this.selector)[0].scrollHeight,o=$(this.selector).height();t>o&&this.scrollBarElement.fadeIn()},touchHideScrollBar:function(){this.scrollBarElement.fadeOut()},touchDestroyScollBar:function(){this.scrollBarElement.remove()},touchUpdateScrollBar:function(){var t=$(this.selector)[0].scrollHeight,o=$(this.selector).height(),e=$(this.selector).scrollTop(),h=$(this.selector).offset().top+Math.round(1*e/t*o);this.scrollBarElement.height(Math.round(1*o*o/t)),this.scrollBarElement.offset({top:h,right:10})}};